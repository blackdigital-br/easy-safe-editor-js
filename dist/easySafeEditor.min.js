!function(e){var t={};function i(n){if(t[n])return t[n].exports;var s=t[n]={i:n,l:!1,exports:{}};return e[n].call(s.exports,s,s.exports,i),s.l=!0,s.exports}i.m=e,i.c=t,i.d=function(e,t,n){i.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},i.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},i.t=function(e,t){if(1&t&&(e=i(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(i.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var s in e)i.d(n,s,function(t){return e[t]}.bind(null,s));return n},i.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return i.d(t,"a",t),t},i.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},i.p="",i(i.s=0)}([function(e,t,i){"use strict";i.r(t);function n(e){return function(e){let t=document.createElement("template");return t.innerHTML=e.trim(),t.content.childNodes}(e)[0]}class s{constructor(){}create(){let e=document.getElementsByTagName("body")[0],t=n(s.toolsHTML);e.insertBefore(t,e.firstChild),this.panelTool=document.getElementById("easySafeTools"),this.pageTitle=document.getElementById("easySafeTools_PageTitle"),this.editableContainers=document.getElementById("easySafeTools_EditableContainers"),this.collapseButton=document.getElementById("easySafeTools_collapsePanel"),this.collapseButton.addEventListener("click",e=>this.onCollapseButtonClick(e),!0),this.pageTitle.value=window.easySafeEditor.post.getTitle(),this.pageTitle.addEventListener("input",e=>this.onChangeTitle(e),!0)}remove(){this.panelTool.remove(),this.panelTool=null,this.pageTitle=null,this.editableContainers=null}showTools(){this.panelTool.classList.remove("show"),this.panelTool.classList.add("hidden")}hiddenTools(){this.panelTool.classList.remove("hidden"),this.panelTool.classList.add("show")}toggleTools(){this.panelTool.classList.contains("show")?this.showTools():this.hiddenTools()}insertEditables(e){for(let t in e){let i=e[t],s=n(`<li><a href="#" title="${i.label}" data-index="${t}">${i.label}</a></li>`);s.firstChild.addEventListener("click",e=>this.onSelectButtonClick(e),!0),this.editableContainers.appendChild(s)}}onSelectButtonClick(e){let t=e.target.getAttribute("data-index"),i=window.easySafeEditor.editables[t];i.element.scrollIntoView({block:"center"}),window.easySafeEditor.selectEditable(i),e.preventDefault()}onCollapseButtonClick(e){this.toggleTools(),e.preventDefault()}onChangeTitle(e){window.easySafeEditor.post.setTitle(e.target.value)}}s.toolsHTML='\n<div id="easySafeTools" class="menu-admin show">\n    <header class="header-admin"><div class="d-flex justify-content-between align-items-center flex-row">\n        <div class="recolher-menu d-flex align-items-center justify-content-center"">\n            <a id="easySafeTools_collapsePanel" href="#" title="Recolher Menu"><img src="images-admin/left.svg" alt="Recolher Menu"/></a>\n        </div>\n    </header>\n    <div class="title-admin d-flex align-items-center justify-content-center flex-row">\n        <div class="d-flex">\n            <h2>Você está editando a página: <input id="easySafeTools_PageTitle" type="text" value="Sobre"></input> </h2>\n        </div>\n    </div>\n    <div class="content-itens">\n        <ul id="easySafeTools_EditableContainers"></ul>\n    </div>\n</div>';class l{constructor(){}create(){document.getElementsByTagName("body")[0].appendChild(n(l.toolsHTML)),this.frameTool=document.getElementById("frameEdtitable"),this.pageTitle=document.getElementById("frameEdtitable_frameTitle"),this.actionsDiv=document.getElementById("frameEdtitable_frameActions")}showActions(e){for(;this.actionsDiv.firstChild;)this.actionsDiv.removeChild(this.actionsDiv.lastChild);null!=e&&null!=e?(this.frameTool.style.visibility="visible",this.frameTool.style.position="absolute",this.frameTool.style.left=function(e){let t=0;do{isNaN(e.offsetLeft)||(t+=e.offsetLeft)}while(e=e.offsetParent);return t}(e.element)+"px",this.frameTool.style.top=function(e){let t=0;do{isNaN(e.offsetTop)||(t+=e.offsetTop)}while(e=e.offsetParent);return t}(e.element)-this.frameTool.offsetHeight+"px",this.pageTitle.innerText=e.label):(this.pageTitle.innerText="",this.frameTool.style.visibility="hidden")}remove(){this.panelTool.remove(),this.panelTool=null,this.pageTitle=null,this.editableContainers=null}}l.toolsHTML='\n<div id="frameEdtitable" style="visibility: hidden;">\n    <h6 id="frameEdtitable_frameTitle">Name</h6>\n    <div id="frameEdtitable_frameActions" class="frameActions">\n    </div>\n</div>';class a{create(){let e=document.getElementsByTagName("body")[0],t=a.HTML;t=t.replace("{save}",window.easySafeEditor.getOptions().labels.save),t=t.replace("{cancel}",window.easySafeEditor.getOptions().labels.cancel),t=t.replace("{draft}",window.easySafeEditor.getOptions().labels.draft),e.appendChild(n(t)),this.actionBar=document.getElementById("easyActionBar"),this.saveButton=document.getElementById("easyActionBar_save"),this.cancelButton=document.getElementById("easyActionBar_cancel"),this.draftButton=document.getElementById("easyActionBar_draft"),this.saveButton.addEventListener("click",e=>this.onSaveClickButton(e),!0),this.cancelButton.addEventListener("click",e=>this.onCancelClickButton(e),!0),this.draftButton.addEventListener("click",e=>this.onDraftClickButton(e),!0)}onSaveClickButton(e){window.easySafeEditor.post.savePost(),e.preventDefault()}onCancelClickButton(e){e.preventDefault()}onDraftClickButton(e){window.easySafeEditor.post.savePost("draft"),e.preventDefault()}}a.HTML='\n<div id="easyActionBar" class="botoes-acoes d-flex flex-row">\n    <div class="publicar-atualizar">\n        <a id="easyActionBar_save" href="#" title="Publicar">\n            <div class="img d-flex align-items-center justify-content-center">\n                <img src="images-admin/publicar.svg" alt="Publicar"/>\n            </div>\n            <div class="texto">\n                <p>{save}</p>\n            </div>\n        </a> \n    </div>\n    <div class="raschunho">\n        <a id="easyActionBar_draft" href="#" title="Raschunho">\n            <div class="img d-flex align-items-center justify-content-center">\n                <img src="images-admin/rascunho.svg" alt="Raschunho"/>\n            </div>\n            <div class="texto">\n                <p>{draft}</p>\n            </div>\n        </a> \n    </div>\n    <div class="cancelar">\n        <a id="easyActionBar_cancel" href="#" title="Cancelar">\n            <div class="img d-flex align-items-center justify-content-center">\n                <img src="images-admin/cancelar.svg" alt="Cancelar"/>\n            </div>\n            <div class="texto">\n                <p>{cancel}</p>\n            </div>\n        </a> \n    </div>\n</div>';class o{constructor(e,t){this.type=t.getAttribute("data-type"),this.label=t.getAttribute("data-label"),this.element=t,this.editor=e,this.element.addEventListener("focus",e=>this.onElementFocus(e),!0)}onElementFocus(e){this.editor.selectEditable(this)}getValue(e){let t=this.element.innerHTML;return t=t.replace(/\s\s+/g," "),e[this.label]=t,e}}class r extends o{constructor(e,t){super(e,t),this.startEditor()}startEditor(){this.element.setAttribute("contentEditable",!0)}removeEditor(){this.element.removeAttribute("contentEditable")}}class d{constructor(){}static findByType(e){return e in d.types?d.types[e]:d.types.default}static createEditable(e,t){let i=t.getAttribute("data-type");return new(this.findByType(i))(e,t)}}d.types={text:class extends r{constructor(e,t){super(e,t),t.addEventListener("input",e=>this.onInput(e),!0)}onInput(e){let t=this.element.innerHTML.replace(/(<([^>]+)>)/gi,"");if(t!=this.element.innerHTML){let e=0,i=null;if(window.getSelection&&(i=window.getSelection(),i.getRangeAt)){let t=window.getSelection().getRangeAt(0),i=t.cloneRange();i.selectNodeContents(this.element),i.setEnd(t.endContainer,t.endOffset),e=i.toString().length}this.element.innerHTML=t,e>0&&i.setPosition(this.element.firstChild,e)}}},richText:class extends r{constructor(e,t){super(e,t)}},video:class extends o{constructor(e,t){super(e,t)}},image:class extends o{constructor(e,t){super(e,t)}},button:class extends o{constructor(e,t){super(e,t)}},template:class extends o{constructor(e,t){super(e,t)}},default:o};var c={asideTools:new s,frameTools:new l,post:new class{create(){this.titleElement=null,this.findTitle()}findTitle(){let e=document.querySelectorAll("[data-title='true']");e.length>0?this.titleElement=e[0]:(console.log("No title!"),this.titleElement=document.createTextNode(this.title))}getTitle(){return this.titleElement.innerText}setTitle(e){this.titleElement.innerText=e}savePost(e="publish"){let t={title:this.getTitle(),type:e,fields:window.easySafeEditor.getValues()},i=!1;try{i=window.easySafeEditor.getOptions().actions.save(t)}catch{i=!1}}},actionBar:new a,editables:[],editableSelected:null,title:"",titleElement:null,init:function(){this.post.create(),this.asideTools.create(),this.frameTools.create(),this.actionBar.create(),this.findEditables(),this.asideTools.insertEditables(this.editables)},findEditables:function(){let e=document.querySelectorAll("[data-edit='true']"),t=e.length;for(let i=0;i<t;i++){let t=e[i],n=d.createEditable(this,t);this.editables.push(n)}},selectEditable:function(e){e.element.focus(),this.editableSelected!=e&&(this.editableSelected=e,this.frameTools.showActions(this.editableSelected))},getOptions:function(){let e={};"undefined"!=typeof easySafeEditorOptions&&(e=easySafeEditorOptions),"labels"in e||(e.labels={}),"actions"in e||(e.actions={});return e.labels=Object.assign({save:"Save",cancel:"Cancel",draft:"Draft"},e.labels),e.actions=Object.assign({save:function(){return!0},cancel:function(){}},e.actions),e},getValues:function(){let e={};e.title=this.title;for(let t in this.editables){e=this.editables[t].getValue(e)}return e}};window.easySafeEditor=c,c.init();t.default=c}]);