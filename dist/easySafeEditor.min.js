!function(e){var t={};function i(s){if(t[s])return t[s].exports;var n=t[s]={i:s,l:!1,exports:{}};return e[s].call(n.exports,n,n.exports,i),n.l=!0,n.exports}i.m=e,i.c=t,i.d=function(e,t,s){i.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:s})},i.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},i.t=function(e,t){if(1&t&&(e=i(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var s=Object.create(null);if(i.r(s),Object.defineProperty(s,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var n in e)i.d(s,n,function(t){return e[t]}.bind(null,n));return s},i.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return i.d(t,"a",t),t},i.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},i.p="",i(i.s=0)}([function(e,t,i){"use strict";i.r(t);function s(e){return function(e){let t=document.createElement("template");return t.innerHTML=e.trim(),t.content.childNodes}(e)[0]}class n{constructor(){}create(){let e=document.getElementsByTagName("body")[0],t=n.HTML;t=t.replace(/{pathImage}/g,window.easySafeEditor.options.getValue("paths.images")),t=t.replace(/{pageEditTitle}/g,window.easySafeEditor.options.getValue("labels.pageEditTitle")),t=t.replace(/{openMenu}/g,window.easySafeEditor.options.getValue("labels.openMenu")),t=t.replace(/{closeMenu}/g,window.easySafeEditor.options.getValue("labels.closeMenu")),t=t.replace(/{close}/g,window.easySafeEditor.options.getValue("labels.close"));let i=s(t);e.insertBefore(i,e.firstChild),this.panelTool=document.getElementById("easySafeTools"),this.pageTitle=document.getElementById("easySafeTools_PageTitle"),this.editableContainers=document.getElementById("easySafeTools_EditableContainers"),this.collapseButton=document.getElementById("easySafeTools_collapsePanel"),this.uncollapseButton=document.getElementById("easySafeTools_uncollapsePanel"),this.closeButton=document.getElementById("easySafeTools_closePanel"),this.buttonsContainer=document.getElementById("easySafeTools_sideButtons"),this.collapseButton.addEventListener("click",e=>this.onCollapseButtonClick(e),!0),this.uncollapseButton.addEventListener("click",e=>this.onCollapseButtonClick(e),!0),this.closeButton.addEventListener("click",e=>this.onCloseButtonClick(e),!0),this.pageTitle.value=window.easySafeEditor.post.getTitle(),this.pageTitle.addEventListener("input",e=>this.onChangeTitle(e),!0),window.easySafeEditor.options.getValue("sideBar.buttons").forEach(e=>{let t=null;"string"==typeof e?t=s(e):"HTMLElement"==typeof e&&(t=e),null!=t&&this.buttonsContainer.append(t)})}remove(){this.panelTool.remove(),this.panelTool=null,this.pageTitle=null,this.editableContainers=null}showTools(){this.panelTool.classList.remove("show"),this.panelTool.classList.add("hidden")}hiddenTools(){this.panelTool.classList.remove("hidden"),this.panelTool.classList.add("show")}toggleTools(){this.panelTool.classList.contains("show")?this.showTools():this.hiddenTools()}insertEditables(e){for(let t in e){let i=e[t],n=s(`<li><a href="#" title="${i.label}" data-index="${t}">${i.label}</a></li>`);n.firstChild.addEventListener("click",e=>this.onSelectButtonClick(e),!0),this.editableContainers.appendChild(n)}}onSelectButtonClick(e){let t=e.target.getAttribute("data-index"),i=window.easySafeEditor.editables[t];i.element.scrollIntoView({block:"center"}),window.easySafeEditor.selectEditable(i),e.preventDefault()}onCollapseButtonClick(e){this.toggleTools(),e.preventDefault()}onChangeTitle(e){window.easySafeEditor.post.setTitle(e.target.value)}async onCloseButtonClick(e){e.preventDefault(),await window.easySafeEditor.post.cancelPost()}}n.HTML='\n<div id="easySafeTools" class="menu-admin show">\n    <div class="open-menu">\n        <a id="easySafeTools_uncollapsePanel" href="#" title="{openMenu}"><img src="{pathImage}left.svg" alt="{openMenu}"/></a>\n    </div>\n    <header class="header-admin"><div class="d-flex justify-content-between align-items-center flex-row">\n        <div class="close-menu button-menu d-flex align-items-center justify-content-center">\n            <a id="easySafeTools_closePanel" href="#" title="{close}"><img src="{pathImage}close.svg" alt="{close}"/></a>\n        </div>\n        <div class="collapse-menu button-menu d-flex align-items-center justify-content-center"">\n            <a id="easySafeTools_collapsePanel" href="#" title="{closeMenu}"><img src="{pathImage}left.svg" alt="{closeMenu}"/></a>\n        </div>\n        <div id="easySafeTools_sideButtons" class="action-menu d-flex align-items-center justify-content-center flex-row ml-auto">\n        </div>\n    </header>\n    <div class="title-admin d-flex align-items-center justify-content-center flex-row">\n        <div class="d-flex">\n            <h2>{pageEditTitle} <input id="easySafeTools_PageTitle" type="text" value="Sobre"></input> </h2>\n        </div>\n    </div>\n    <div class="content-itens">\n        <ul id="easySafeTools_EditableContainers"></ul>\n    </div>\n</div>';class l{constructor(){}create(){document.getElementsByTagName("body")[0].appendChild(s(l.toolsHTML)),this.frameTool=document.getElementById("frameEdtitable"),this.pageTitle=document.getElementById("frameEdtitable_frameTitle"),this.actionsDiv=document.getElementById("frameEdtitable_frameActions"),this.currentEditable=null}showActions(e){for(;this.actionsDiv.firstChild;)this.actionsDiv.removeChild(this.actionsDiv.lastChild);null!=this.currentEditable&&this.currentEditable.element.classList.remove("editable-focus"),null!=e&&null!=e?(this.currentEditable=e,this.frameTool.style.visibility="visible",this.frameTool.style.position="absolute",this.frameTool.style.left=function(e){let t=0;do{isNaN(e.offsetLeft)||(t+=e.offsetLeft)}while(e=e.offsetParent);return t}(e.element)+"px",this.frameTool.style.top=function(e){let t=0;do{isNaN(e.offsetTop)||(t+=e.offsetTop)}while(e=e.offsetParent);return t}(e.element)-this.frameTool.offsetHeight+"px",this.pageTitle.innerText=e.label,e.element.classList.add("editable-focus")):(this.pageTitle.innerText="",this.frameTool.style.visibility="hidden",this.currentEditable=null)}remove(){this.panelTool.remove(),this.panelTool=null,this.pageTitle=null,this.editableContainers=null}}l.toolsHTML='\n<div id="frameEdtitable" style="visibility: hidden;">\n    <h6 id="frameEdtitable_frameTitle">Name</h6>\n    <div id="frameEdtitable_frameActions" class="frameActions">\n    </div>\n</div>';class o{show(e){this.element=e,this.display=e.style.display,e.style.visibility="hidden",e.style.display="none",this.loadingElement=s(o.HTML),e.parentElement.insertBefore(this.loadingElement,this.element)}close(){this.loadingElement.remove(),this.element.style.visibility="visible",this.element.style.display=this.display,this.element=null,this.display=null,this.loadingElement=null}static showLoading(e){let t=new o;return t.show(e),t}}o.HTML='<div class="lds-ring"><div></div><div></div><div></div><div></div></div>';class a{create(){let e=document.getElementsByTagName("body")[0],t=a.HTML;t=t.replace(/{save}/g,window.easySafeEditor.options.getValue("labels.save")),t=t.replace(/{cancel}/g,window.easySafeEditor.options.getValue("labels.cancel")),t=t.replace(/{draft}/g,window.easySafeEditor.options.getValue("labels.draft")),t=t.replace(/{pathImage}/g,window.easySafeEditor.options.getValue("paths.images")),e.appendChild(s(t)),this.actionBar=document.getElementById("easyActionBar"),this.saveButton=document.getElementById("easyActionBar_save"),this.cancelButton=document.getElementById("easyActionBar_cancel"),this.draftButton=document.getElementById("easyActionBar_draft"),this.saveButton.addEventListener("click",e=>this.onSaveClickButton(e),!0),this.cancelButton.addEventListener("click",e=>this.onCancelClickButton(e),!0),this.draftButton.addEventListener("click",e=>this.onDraftClickButton(e),!0),this.processing=!1}async onSaveClickButton(e){if(e.preventDefault(),!this.processing){this.processing=!0;let e=o.showLoading(this.saveButton.firstElementChild.firstElementChild);await window.easySafeEditor.post.savePost(),e.close(),this.processing=!1}}async onCancelClickButton(e){if(e.preventDefault(),!this.processing){this.processing=!0;let e=o.showLoading(this.cancelButton.firstElementChild.firstElementChild);await window.easySafeEditor.post.cancelPost(),e.close(),this.processing=!1}}async onDraftClickButton(e){if(e.preventDefault(),!this.processing){this.processing=!0;let e=o.showLoading(this.draftButton.firstElementChild.firstElementChild);await window.easySafeEditor.post.savePost("draft"),e.close(),this.processing=!1}}}a.HTML='\n<div id="easyActionBar" class="actionBar-buttons d-flex flex-row">\n    <div class="publish-refresh">\n        <a id="easyActionBar_save" href="#" title="{save}">\n            <div class="img d-flex align-items-center justify-content-center">\n                <img src="{pathImage}publicar.svg" alt="{save}"/>\n            </div>\n            <div class="texto">\n                <p>{save}</p>\n            </div>\n        </a> \n    </div>\n    <div class="draft">\n        <a id="easyActionBar_draft" href="#" title="{draft}">\n            <div class="img d-flex align-items-center justify-content-center">\n                <img src="{pathImage}rascunho.svg" alt="{draft}"/>\n            </div>\n            <div class="texto">\n                <p>{draft}</p>\n            </div>\n        </a> \n    </div>\n    <div class="cancel">\n        <a id="easyActionBar_cancel" href="#" title="{cancel}">\n            <div class="img d-flex align-items-center justify-content-center">\n                <img src="{pathImage}cancel.svg" alt="{cancel}"/>\n            </div>\n            <div class="texto">\n                <p>{cancel}</p>\n            </div>\n        </a> \n    </div>\n</div>';class r{constructor(e,t){this.type=t.getAttribute("data-type"),this.label=t.getAttribute("data-label"),this.element=t,this.editor=e,this.element.addEventListener("focus",e=>this.onElementFocus(e),!0)}onElementFocus(e){this.editor.selectEditable(this)}getValue(e){let t=this.element.innerHTML;return t=t.replace(/\s\s+/g," "),e[this.label]=t,e}}class d extends r{constructor(e,t){super(e,t),this.startEditor()}startEditor(){this.element.setAttribute("contentEditable",!0)}removeEditor(){this.element.removeAttribute("contentEditable")}}class c{constructor(){}static findByType(e){return e in c.types?c.types[e]:c.types.default}static createEditable(e,t){let i=t.getAttribute("data-type");return new(this.findByType(i))(e,t)}}c.types={text:class extends d{constructor(e,t){super(e,t),t.addEventListener("input",e=>this.onInput(e),!0)}onInput(e){let t=this.element.innerHTML.replace(/(<([^>]+)>)/gi,"");if(t!=this.element.innerHTML){let e=0,i=null;if(window.getSelection&&(i=window.getSelection(),i.getRangeAt)){let t=window.getSelection().getRangeAt(0),i=t.cloneRange();i.selectNodeContents(this.element),i.setEnd(t.endContainer,t.endOffset),e=i.toString().length}this.element.innerHTML=t,e>0&&i.setPosition(this.element.firstChild,e)}}},richText:class extends d{constructor(e,t){super(e,t)}},video:class extends r{constructor(e,t){super(e,t)}},image:class extends r{constructor(e,t){super(e,t)}},button:class extends r{constructor(e,t){super(e,t)}},template:class extends r{constructor(e,t){super(e,t)}},default:r};var u={asideTools:new n,frameTools:new l,post:new class{create(){this.titleElement=null,this.findTitle()}findTitle(){let e=document.querySelectorAll("[data-title='true']");e.length>0?this.titleElement=e[0]:(console.log("No title!"),this.titleElement=document.createTextNode(""))}getTitle(){return this.titleElement.textContent}setTitle(e){this.titleElement.textContent=e}savePost(e="publish"){let t={title:this.getTitle(),type:e,fields:window.easySafeEditor.getValues()},i=!1;try{if(i=window.easySafeEditor.options.getValue("actions.save")(t),"Promise"==typeof i)return i}catch{i=!1}return new Promise(e=>{e(i)})}cancelPost(){let e=!1;try{if(e=window.easySafeEditor.options.getValue("actions.cancel")(),"Promise"==typeof e)return e}catch{e=!1}return new Promise(t=>{t(e)})}},actionBar:new a,options:new class{constructor(){this.optionsDefaults={labels:{save:"Save",cancel:"Cancel",draft:"Draft",pageEditTitle:"You are editing the page:",openMenu:"Open Menu",closeMenu:"Close Menu",close:"Close"},actions:{save:function(){return!0},cancel:function(){}},paths:{images:"images-admin/"},sideBar:{buttons:[]}},this.options={},this.loadOptions()}loadOptions(){"undefined"!=typeof easySafeEditorOptions?Object.assign(this.options,this.optionsDefaults,easySafeEditorOptions):Object.assign(this.options,this.optionsDefaults,this.options),this.options.labels=Object.assign(this.optionsDefaults.labels,this.options.labels),this.options.actions=Object.assign(this.optionsDefaults.actions,this.options.actions),this.options.paths=Object.assign(this.optionsDefaults.paths,this.options.paths),this.options.sideBar=Object.assign(this.optionsDefaults.sideBar,this.options.sideBar)}getValue(e,t=null){let i=e.split("."),s=(e,t,i)=>{let n=e.shift();if(n in t){let l=t[n];return e.length>0?s(e,l,i):l}return i};return s(i,this.options,t)}},editables:[],editableSelected:null,title:"",titleElement:null,init:function(){this.post.create(),this.asideTools.create(),this.frameTools.create(),this.actionBar.create(),this.findEditables(),this.asideTools.insertEditables(this.editables)},findEditables:function(){let e=document.querySelectorAll("[data-edit='true']"),t=e.length;for(let i=0;i<t;i++){let t=e[i],s=c.createEditable(this,t);this.editables.push(s)}},selectEditable:function(e){e.element.focus(),this.editableSelected!=e&&(this.editableSelected=e,this.frameTools.showActions(this.editableSelected))},getValues:function(){let e={};e.title=this.title;for(let t in this.editables){e=this.editables[t].getValue(e)}return e}};window.easySafeEditor=u,u.init();t.default=u}]);